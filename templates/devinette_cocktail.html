{% extends "devinette_base.html" %}
{% set active_tab = 'cocktail' %}
{% block game_content %}

<div class="bg-white rounded-xl shadow-lg flex flex-row p-6 gap-10 w-full">

  <!-- Cocktail mystÃ¨re -->
  <div class="flex flex-col items-center w-1/3">
    <img src="{{ cocktail_image }}" alt="Cocktail mystÃ¨re"
         class="w-48 h-48 object-cover rounded-lg border shadow mb-3">
    <span class="font-semibold text-gray-600 text-sm italic">
      Devine le cocktail mystÃ¨re
    </span>
  </div>

  <!-- Jeu principal -->
  <div class="flex-1 flex flex-col">

    <!-- Message de victoire -->
    {% if message %}
      <div class="bg-green-100 text-green-800 px-5 py-3 rounded-xl font-semibold mb-6 shadow text-center">
        {{ message }}
      </div>
    {% endif %}

    <form method="POST" class="mb-4 flex flex-row gap-2">
      <label for="ingredient" class="sr-only">Nom du cocktail</label>
      <input id="ingredient" name="ingredient" type="text"
             class="flex-1 px-4 py-2 border rounded"
             placeholder="Ex : Brigadier, Bloody Mary..." required>
      <button type="submit"
              class="px-5 py-2 bg-blue-600 text-white rounded-lg">Valider</button>
    </form>

    <form style="text-align: center; margin-top: 10px;">
      <button type="submit" name="reset" value="1">ðŸ”„ Recommencer</button>
    </form>

    <div class="space-y-4">
      {% for at in attempts %}
      <div class="flex items-center bg-gray-100 rounded-xl shadow p-3 gap-4">
        {% if at.img %}
          <img src="{{ at.img }}" alt="{{ at.raw_input }}"
               class="w-20 h-20 object-cover rounded-lg border shadow">
        {% else %}
          <div class="w-20 h-20 bg-gray-300 rounded flex items-center justify-center text-gray-500 text-xs italic">
            ?
          </div>
        {% endif %}
        <span class="font-semibold text-lg text-gray-800 italic min-w-[120px]">{{ at.raw_input }}</span>

        <div class="flex flex-wrap gap-2">
          {% for ui in at.user_ingredients %}
            <span class="px-3 py-1 rounded text-white text-sm font-mono
              {% if ui.status == 'good' %} bg-green-600
              {% else %} bg-red-600 {% endif %}">
              {{ ui.ingredient }}
            </span>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}
